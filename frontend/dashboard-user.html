<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartFold â€” Customer Portal</title>
  <link rel="stylesheet" href="/frontend/style.css" />
</head>
<body>
  <style>
    /* If these selectors exist, hide the legacy order card */
    .legacy-place-order, #newOrderCard, [data-legacy-order-form] { display:none !important; }
  </style>
  <header class="navbar">
    <div style="display:flex; align-items:center; gap:16px;">
      <h1 style="font-size:1.5rem;">SmartFold</h1>
      <nav style="display:flex; gap:12px;">
        <a href="#orders" class="btn" style="background:#1F3A8A;">My Orders</a>
        <a href="#messages" class="btn" style="background:#1F3A8A;">Messages</a>
        <a href="/frontend/place-order.html" class="btn" style="background:#1F3A8A;">Place Order</a>
      </nav>
    </div>
    <button id="logout-user" style="background:#ef4444;">Logout</button>
  </header>

  <main style="padding:32px; max-width:1100px; margin:0 auto;">
    <a href="/frontend/place-order.html" class="btn-primary" style="display:inline-flex; align-items:center; gap:8px; margin-bottom:24px;">
      Place New Order
    </a>

    <section class="card" id="new-order" data-legacy-order-form>
      <h2 class="card-title">Place New Order</h2>
      <form id="user-order-form" novalidate>
        <div class="form-row">
          <div>
            <label for="user-service">Service Type</label>
            <select id="user-service" required></select>
            <div class="helper-text" data-for="user-service" style="display:none;"></div>
          </div>
          <div>
            <label for="user-quantity">Quantity</label>
            <input type="number" id="user-quantity" min="1" step="0.1" required />
            <div class="helper-text" data-for="user-quantity" style="display:none;"></div>
          </div>
          <div>
            <label for="user-unit">Unit</label>
            <select id="user-unit" required></select>
            <div class="helper-text" data-for="user-unit" style="display:none;"></div>
          </div>
        </div>

        <div class="form-row">
          <div>
            <label for="user-pickup">Pickup Date</label>
            <input type="date" id="user-pickup" />
          </div>
          <div>
            <label for="user-delivery">Delivery Date</label>
            <input type="date" id="user-delivery" />
          </div>
        </div>

        <label for="user-notes">Notes</label>
        <textarea id="user-notes" placeholder="Optional notes"></textarea>

        <label for="user-price">Estimated Price (LKR)</label>
        <input type="number" id="user-price" min="0" step="50" required />
        <div class="helper-text" data-for="user-price" style="display:none;"></div>

        <button type="submit">Submit Order</button>
      </form>
    </section>

    <section class="card" id="orders">
      <h2 class="card-title">My Orders</h2>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Service</th>
              <th>Quantity</th>
              <th>Price (LKR)</th>
              <th>Status</th>
              <th>Pickup</th>
              <th>Delivery</th>
            </tr>
          </thead>
          <tbody id="user-orders-body"></tbody>
        </table>
      </div>
    </section>

    <section class="card" id="messages">
      <h2 class="card-title">Messages with SmartFold Admin</h2>
      <div class="message-thread">
        <div class="message-list" id="user-message-list"></div>
        <form id="user-message-form" style="display:flex; gap:12px;">
          <input type="text" id="user-message-input" placeholder="Write a message" required />
          <button type="submit">Send</button>
        </form>
      </div>
    </section>
  </main>

  <script type="module" src="/frontend/user.js"></script>
</body>
</html>
